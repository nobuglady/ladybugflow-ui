CREATE TABLE `flow_info` (
  `flow_id` varchar(50) NOT NULL,
  `flow_name` varchar(100) DEFAULT NULL,
  `flow_desc` varchar(100) DEFAULT NULL,
  `flow_json` text DEFAULT NULL,
  `disable_flag` int(11) NOT NULL,
  `create_user` varchar(50) NOT NULL,
  `update_user` varchar(50) NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`flow_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `history_flow` (
  `flow_id` varchar(50) NOT NULL,
  `history_id` varchar(50) NOT NULL,
  `category_id` varchar(50) DEFAULT NULL,
  `flow_name` varchar(100) DEFAULT NULL,
  `flow_desc` varchar(100) DEFAULT NULL,
  `start_param` varchar(1000) DEFAULT NULL,
  `flow_status` int(11) NOT NULL,
  `flow_result` varchar(100) DEFAULT NULL,
  `start_time` datetime DEFAULT NULL,
  `finish_time` datetime DEFAULT NULL,
  `error_time` datetime DEFAULT NULL,
  `disable_flag` int(11) NOT NULL,
  `create_user` varchar(50) NOT NULL,
  `update_user` varchar(50) NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`flow_id`,`history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `history_node` (
  `flow_id` varchar(50) NOT NULL,
  `node_id` varchar(50) NOT NULL,
  `history_id` varchar(50) NOT NULL,
  `node_name` varchar(100) NOT NULL,
  `ref_name` varchar(100) NOT NULL,
  `display_flag` int(11) NOT NULL,
  `ready_check` int(11) NOT NULL,
  `node_type` int(11) NOT NULL,
  `start_type` int(11) NOT NULL,
  `execute_type` int(11) NOT NULL,
  `start_cron` varchar(100) DEFAULT NULL,
  `sub_flow_id` varchar(50) DEFAULT NULL,
  `sub_node_id` varchar(50) DEFAULT NULL,
  `layout_x` varchar(100) DEFAULT NULL,
  `layout_y` varchar(100) DEFAULT NULL,
  `skip_flag` int(11) NOT NULL,
  `skip_value` varchar(100) DEFAULT NULL,
  `node_status` int(11) NOT NULL,
  `node_status_detail` int(11) NOT NULL,
  `return_value` varchar(1000) DEFAULT NULL,
  `start_time` datetime DEFAULT NULL,
  `finish_time` datetime DEFAULT NULL,
  `node_result_message` varchar(100) DEFAULT NULL,
  `disable_flag` int(11) NOT NULL,
  `create_user` varchar(50) NOT NULL,
  `update_user` varchar(50) NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`flow_id`,`node_id`,`history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `history_edge` (
  `flow_id` varchar(50) NOT NULL,
  `edge_id` varchar(50) NOT NULL,
  `history_id` varchar(50) NOT NULL,
  `from_node_id` varchar(50) NOT NULL,
  `to_node_id` varchar(50) NOT NULL,
  `edge_name` varchar(100) NOT NULL,
  `ref_name` varchar(100) NOT NULL,
  `display_flag` int(11) NOT NULL,
  `edge_condition` varchar(1000) DEFAULT NULL,
  `edge_exception_return_type` int(11) NOT NULL,
  `skip_flag` int(11) NOT NULL,
  `skip_value` varchar(100) DEFAULT NULL,
  `edge_status` int(11) NOT NULL,
  `disable_flag` int(11) NOT NULL,
  `create_user` varchar(50) NOT NULL,
  `update_user` varchar(50) NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`flow_id`,`edge_id`,`history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `history_node_status` (
  `flow_id` varchar(50) NOT NULL,
  `node_id` varchar(50) NOT NULL,
  `history_id` varchar(50) NOT NULL,
  `history_status_seq` int(11) NOT NULL AUTO_INCREMENT,
  `node_status` int(11) NOT NULL,
  `node_status_detail` int(11) NOT NULL,
  `remark` varchar(100) DEFAULT NULL,
  `create_user` varchar(50) NOT NULL,
  `update_user` varchar(50) NOT NULL,
  `create_time` datetime NOT NULL,
  `update_time` datetime NOT NULL,
  PRIMARY KEY (`history_status_seq`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
